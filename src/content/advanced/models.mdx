# æ¨¡åž‹é…ç½®ä¸Žåˆ‡æ¢

OpenClaw æ”¯æŒæŽ¥å…¥å¤šä¸ª AI æ¨¡åž‹æä¾›å•†ï¼Œå¹¶æä¾›çµæ´»çš„æ¨¡åž‹é€‰æ‹©ã€åˆ‡æ¢å’Œå›žé€€æœºåˆ¶ã€‚æœ¬æ–‡å°†è¯¦ç»†è®²è§£å¦‚ä½•é…ç½®æ¨¡åž‹ã€ç®¡ç†å¤šæä¾›å•†è®¤è¯ï¼Œä»¥åŠåœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ‡æ¢æ¨¡åž‹ã€‚

## æ¨¡åž‹é€‰æ‹©ä¼˜å…ˆçº§

OpenClaw çš„æ¨¡åž‹é€‰æ‹©éµå¾ª **ä¼˜å…ˆçº§é“¾** æœºåˆ¶ï¼š

```
ç”¨æˆ·è¿è¡Œæ—¶æŒ‡å®šï¼ˆ/model å‘½ä»¤ï¼‰
    â†“ æœªæŒ‡å®šåˆ™
Agent é…ç½®ä¸­çš„ primary model
    â†“ ä¸å¯ç”¨åˆ™
Fallback æ¨¡åž‹åˆ—è¡¨ï¼ˆæŒ‰é¡ºåºå°è¯•ï¼‰
    â†“ å…¨éƒ¨ä¸å¯ç”¨åˆ™
ç³»ç»Ÿé»˜è®¤æ¨¡åž‹
```

### é…ç½® Primary å’Œ Fallbacks

```yaml
# openclaw.yaml
agents:
  defaults:
    models:
      # ä¸»è¦æ¨¡åž‹ï¼ˆä¼˜å…ˆä½¿ç”¨ï¼‰
      primary: "anthropic/claude-sonnet-4-20250514"
      
      # å›žé€€æ¨¡åž‹åˆ—è¡¨ï¼ˆæŒ‰ä¼˜å…ˆçº§æŽ’åºï¼‰
      fallbacks:
        - "anthropic/claude-sonnet-4-20250514"
        - "openai/gpt-4o"
        - "google/gemini-2.5-pro"
```

### å›žé€€è§¦å‘æ¡ä»¶

å½“ä»¥ä¸‹æƒ…å†µå‘ç”Ÿæ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨å°è¯•ä¸‹ä¸€ä¸ªå›žé€€æ¨¡åž‹ï¼š

- å½“å‰æ¨¡åž‹ API è¿”å›žé”™è¯¯ï¼ˆ500/503ï¼‰
- æ¨¡åž‹æœåŠ¡é™æµï¼ˆ429 Rate Limitï¼‰
- API Key æ— æ•ˆæˆ–é¢åº¦ä¸è¶³
- ç½‘ç»œè¿žæŽ¥è¶…æ—¶

```yaml
agents:
  defaults:
    models:
      primary: "anthropic/claude-sonnet-4-20250514"
      fallbacks:
        - "openai/gpt-4o"
      
      # å›žé€€è¡Œä¸ºé…ç½®
      fallbackPolicy:
        # æœ€å¤§é‡è¯•æ¬¡æ•°
        maxRetries: 2
        # é‡è¯•é—´éš”ï¼ˆæ¯«ç§’ï¼‰
        retryDelayMs: 1000
        # æ˜¯å¦åœ¨å›žé€€æ—¶é€šçŸ¥ç”¨æˆ·
        notifyOnFallback: true
```

## æ”¯æŒçš„æä¾›å•†

OpenClaw æ”¯æŒä¸»æµ AI æ¨¡åž‹æä¾›å•†ï¼Œè¦†ç›–ç»å¤§å¤šæ•°ä½¿ç”¨åœºæ™¯ã€‚

### Anthropicï¼ˆClaude ç³»åˆ—ï¼‰

```yaml
providers:
  anthropic:
    apiKey: "${ANTHROPIC_API_KEY}"
    # å¯ç”¨æ¨¡åž‹
    # - claude-sonnet-4-20250514ï¼ˆæŽ¨èï¼Œæ€§ä»·æ¯”æœ€é«˜ï¼‰
    # - claude-opus-4-20250514ï¼ˆæœ€å¼ºæŽ¨ç†èƒ½åŠ›ï¼‰
    # - claude-haiku-3-20250414ï¼ˆæœ€å¿«é€Ÿåº¦ï¼Œæœ€ä½Žæˆæœ¬ï¼‰
```

### OpenAIï¼ˆGPT ç³»åˆ—ï¼‰

```yaml
providers:
  openai:
    apiKey: "${OPENAI_API_KEY}"
    # å¯ç”¨æ¨¡åž‹
    # - gpt-4oï¼ˆå¤šæ¨¡æ€æ——èˆ°ï¼‰
    # - gpt-4o-miniï¼ˆå¿«é€Ÿç»æµŽï¼‰
    # - o3ï¼ˆé«˜çº§æŽ¨ç†ï¼‰
    # - o4-miniï¼ˆè½»é‡æŽ¨ç†ï¼‰
```

### Googleï¼ˆGemini ç³»åˆ—ï¼‰

```yaml
providers:
  google:
    apiKey: "${GOOGLE_AI_API_KEY}"
    # å¯ç”¨æ¨¡åž‹
    # - gemini-2.5-proï¼ˆæ——èˆ°ï¼‰
    # - gemini-2.5-flashï¼ˆå¿«é€Ÿï¼‰
```

### OpenRouterï¼ˆæ¨¡åž‹èšåˆå™¨ï¼‰

OpenRouter æ˜¯ä¸€ä¸ªæ¨¡åž‹èšåˆå¹³å°ï¼Œä¸€ä¸ª API Key å³å¯è®¿é—®æ•°ç™¾ä¸ªæ¨¡åž‹ï¼š

```yaml
providers:
  openrouter:
    apiKey: "${OPENROUTER_API_KEY}"
    # é€šè¿‡ OpenRouter ä½¿ç”¨ä»»æ„æ¨¡åž‹
    # - openrouter/anthropic/claude-sonnet-4-20250514
    # - openrouter/openai/gpt-4o
    # - openrouter/meta-llama/llama-3.1-405b
    # - openrouter/deepseek/deepseek-chat-v3
```

### å…¶ä»–å…¼å®¹æä¾›å•†

ä»»ä½•å…¼å®¹ OpenAI API æ ¼å¼çš„æä¾›å•†éƒ½å¯ä»¥æŽ¥å…¥ï¼š

```yaml
providers:
  custom:
    apiBase: "https://your-provider.com/v1"
    apiKey: "${CUSTOM_API_KEY}"
    # é€‚ç”¨äºŽï¼š
    # - ç§æœ‰éƒ¨ç½²çš„å¼€æºæ¨¡åž‹ï¼ˆvLLM, Ollamaï¼‰
    # - åŒºåŸŸæ€§ API ä»£ç†
    # - ä¼ä¸šå†…éƒ¨æ¨¡åž‹ç½‘å…³
```

## è®¤è¯æ–¹å¼

OpenClaw æä¾›ä¸¤ç§è®¤è¯æ–¹å¼æ¥ä½¿ç”¨æ¨¡åž‹ã€‚

### æ–¹å¼ä¸€ï¼šAPI Key ç›´æŽ¥é…ç½®

æœ€ç›´æŽ¥çš„æ–¹å¼â€”â€”åœ¨çŽ¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶ä¸­è®¾ç½® API Keyï¼š

```bash
# æ–¹å¼ Aï¼šçŽ¯å¢ƒå˜é‡ï¼ˆæŽ¨èï¼‰
export ANTHROPIC_API_KEY="sk-ant-xxxxxxxxxxxxx"
export OPENAI_API_KEY="sk-xxxxxxxxxxxxx"
export OPENROUTER_API_KEY="sk-or-xxxxxxxxxxxxx"

# æ–¹å¼ Bï¼š.env æ–‡ä»¶
# åœ¨ ~/.openclaw/.env ä¸­
ANTHROPIC_API_KEY=sk-ant-xxxxxxxxxxxxx
OPENAI_API_KEY=sk-xxxxxxxxxxxxx
```

```yaml
# æ–¹å¼ Cï¼šç›´æŽ¥å†™åœ¨ openclaw.yaml ä¸­ï¼ˆä¸æŽ¨èï¼Œæœ‰å®‰å…¨é£Žé™©ï¼‰
providers:
  anthropic:
    apiKey: "sk-ant-xxxxxxxxxxxxx"
```

**å®‰å…¨å»ºè®®**ï¼šä¼˜å…ˆä½¿ç”¨çŽ¯å¢ƒå˜é‡æˆ– `.env` æ–‡ä»¶ï¼Œé¿å…å°† API Key æäº¤åˆ° Git ä»“åº“ã€‚

### æ–¹å¼äºŒï¼šOAuth è®¢é˜…

å¦‚æžœä½ ä½¿ç”¨ OpenClaw çš„æ‰˜ç®¡æœåŠ¡æˆ–è®¢é˜…è®¡åˆ’ï¼š

```yaml
# é€šè¿‡ OAuth è®¤è¯ï¼Œæ— éœ€æ‰‹åŠ¨ç®¡ç† API Key
auth:
  method: "oauth"
  # OAuth é…ç½®ç”± openclaw login å‘½ä»¤è‡ªåŠ¨å¤„ç†
```

```bash
# ç™»å½•å¹¶å…³è”è®¢é˜…
openclaw login

# æŸ¥çœ‹å½“å‰è®¢é˜…çŠ¶æ€
openclaw subscription status
```

OAuth æ–¹å¼çš„ä¼˜ç‚¹ï¼š
- æ— éœ€ç®¡ç†å¤šä¸ª API Key
- ç»Ÿä¸€çš„ç”¨é‡è®¡è´¹
- è‡ªåŠ¨è½®è½¬å‡­è¯

## /model å‘½ä»¤åˆ‡æ¢æ¨¡åž‹

åœ¨å¯¹è¯ä¸­ï¼Œä½ å¯ä»¥éšæ—¶ä½¿ç”¨ `/model` å‘½ä»¤åˆ‡æ¢å½“å‰ä½¿ç”¨çš„æ¨¡åž‹ã€‚

### åŸºæœ¬ç”¨æ³•

```
# æŸ¥çœ‹å½“å‰æ¨¡åž‹
/model

# åˆ‡æ¢åˆ°æŒ‡å®šæ¨¡åž‹
/model claude-sonnet-4-20250514

# åˆ‡æ¢åˆ° GPT-4o
/model gpt-4o

# é€šè¿‡ OpenRouter ä½¿ç”¨æ¨¡åž‹
/model openrouter/deepseek/deepseek-chat-v3
```

### åˆ‡æ¢è¡Œä¸º

- åˆ‡æ¢ **ç«‹å³ç”Ÿæ•ˆ**ï¼Œå½“å‰ä¼šè¯çš„åŽç»­æ¶ˆæ¯å°†ä½¿ç”¨æ–°æ¨¡åž‹
- **ä¸ä¼šæ¸…ç©º** ä¼šè¯ä¸Šä¸‹æ–‡ï¼ˆåŽ†å²æ¶ˆæ¯ä¿ç•™ï¼‰
- ä¼šè¯é‡ç½®åŽæ¢å¤ä¸ºé…ç½®æ–‡ä»¶ä¸­çš„é»˜è®¤æ¨¡åž‹
- ä¸åŒæ¨¡åž‹å¯¹ä¸Šä¸‹æ–‡é•¿åº¦çš„æ”¯æŒä¸åŒï¼Œåˆ‡æ¢æ—¶éœ€æ³¨æ„

### åˆ‡æ¢åœºæ™¯å»ºè®®

```
ç®€å•é—®ç­”ã€æ—¥å¸¸èŠå¤© â†’ claude-haiku æˆ– gpt-4o-miniï¼ˆå¿«é€Ÿä¾¿å®œï¼‰
ä»£ç ç¼–å†™ã€æŠ€æœ¯åˆ†æž â†’ claude-sonnet æˆ– gpt-4oï¼ˆå¹³è¡¡ï¼‰
å¤æ‚æŽ¨ç†ã€é•¿æ–‡å†™ä½œ â†’ claude-opus æˆ– o3ï¼ˆæœ€å¼ºèƒ½åŠ›ï¼‰
```

## agents.defaults.models ç™½åå•

åœ¨å¤šç”¨æˆ·çŽ¯å¢ƒä¸­ï¼Œä½ å¯èƒ½å¸Œæœ› **é™åˆ¶ç”¨æˆ·å¯ä»¥ä½¿ç”¨çš„æ¨¡åž‹**ï¼Œé¿å…ä»–ä»¬åˆ‡æ¢åˆ°æ˜‚è´µçš„æ¨¡åž‹å¯¼è‡´è´¦å•æš´å¢žã€‚

### é…ç½®æ¨¡åž‹ç™½åå•

```yaml
# openclaw.yaml
agents:
  defaults:
    models:
      primary: "anthropic/claude-sonnet-4-20250514"
      
      # å…è®¸ç”¨æˆ·é€šè¿‡ /model åˆ‡æ¢åˆ°çš„æ¨¡åž‹åˆ—è¡¨
      allowed:
        - "anthropic/claude-sonnet-4-20250514"
        - "anthropic/claude-haiku-3-20250414"
        - "openai/gpt-4o-mini"
      
      # æ˜Žç¡®ç¦æ­¢çš„æ¨¡åž‹ï¼ˆå³ä½¿åœ¨ allowed ä¸­ä¹Ÿä¼šè¢«æ‹’ç»ï¼‰
      denied:
        - "anthropic/claude-opus-4-20250514"  # å¤ªè´µäº†ï¼
```

### ç™½åå•è¡Œä¸º

- å¦‚æžœé…ç½®äº† `allowed`ï¼Œç”¨æˆ·åªèƒ½åˆ‡æ¢åˆ°åˆ—è¡¨ä¸­çš„æ¨¡åž‹
- å¦‚æžœæœªé…ç½® `allowed`ï¼Œç”¨æˆ·å¯ä»¥åˆ‡æ¢åˆ°ä»»ä½•å·²è®¤è¯çš„æ¨¡åž‹
- `denied` åˆ—è¡¨ä¼˜å…ˆçº§æœ€é«˜ï¼Œå§‹ç»ˆä¼šè¢«æ‹’ç»
- ç®¡ç†å‘˜ä¸å—ç™½åå•é™åˆ¶

## å®Œæ•´é…ç½®ç¤ºä¾‹

### ä¸ªäººç”¨æˆ·é…ç½®

```yaml
# openclaw.yaml â€” ä¸ªäººç”¨æˆ·æŽ¨èé…ç½®
agents:
  defaults:
    models:
      primary: "anthropic/claude-sonnet-4-20250514"
      fallbacks:
        - "openai/gpt-4o"

providers:
  anthropic:
    apiKey: "${ANTHROPIC_API_KEY}"
  openai:
    apiKey: "${OPENAI_API_KEY}"
```

### ç¤¾åŒº Bot é…ç½®

```yaml
# openclaw.yaml â€” ç¤¾åŒº Bot æŽ¨èé…ç½®ï¼ˆæŽ§åˆ¶æˆæœ¬ï¼‰
agents:
  defaults:
    models:
      primary: "anthropic/claude-haiku-3-20250414"
      fallbacks:
        - "openai/gpt-4o-mini"
      
      # é™åˆ¶ç”¨æˆ·å¯ç”¨æ¨¡åž‹
      allowed:
        - "anthropic/claude-haiku-3-20250414"
        - "anthropic/claude-sonnet-4-20250514"
        - "openai/gpt-4o-mini"
      
      # ç¦æ­¢ä½¿ç”¨æ˜‚è´µæ¨¡åž‹
      denied:
        - "anthropic/claude-opus-4-20250514"
        - "openai/o3"

providers:
  anthropic:
    apiKey: "${ANTHROPIC_API_KEY}"
  openai:
    apiKey: "${OPENAI_API_KEY}"
```

### ä½¿ç”¨ OpenRouter çš„ç»Ÿä¸€é…ç½®

```yaml
# openclaw.yaml â€” é€šè¿‡ OpenRouter è®¿é—®æ‰€æœ‰æ¨¡åž‹
agents:
  defaults:
    models:
      primary: "openrouter/anthropic/claude-sonnet-4-20250514"
      fallbacks:
        - "openrouter/openai/gpt-4o"
        - "openrouter/google/gemini-2.5-flash"

providers:
  openrouter:
    apiKey: "${OPENROUTER_API_KEY}"
```

## æ¨¡åž‹æ€§èƒ½å¯¹æ¯”å‚è€ƒ

é€‰æ‹©æ¨¡åž‹æ—¶ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹ç»´åº¦ï¼š

```
æ¨¡åž‹                        é€Ÿåº¦    è´¨é‡    ä»·æ ¼    ä¸Šä¸‹æ–‡é•¿åº¦
claude-opus-4              â˜…â˜…â˜†    â˜…â˜…â˜…â˜…â˜…  $$$$   200K
claude-sonnet-4            â˜…â˜…â˜…    â˜…â˜…â˜…â˜…   $$     200K
claude-haiku-3.5           â˜…â˜…â˜…â˜…â˜…  â˜…â˜…â˜…    $      200K
gpt-4o                     â˜…â˜…â˜…â˜…   â˜…â˜…â˜…â˜…   $$     128K
gpt-4o-mini                â˜…â˜…â˜…â˜…â˜…  â˜…â˜…â˜…    $      128K
gemini-2.5-pro             â˜…â˜…â˜…    â˜…â˜…â˜…â˜…   $$     1M
gemini-2.5-flash           â˜…â˜…â˜…â˜…â˜…  â˜…â˜…â˜…    $      1M
deepseek-chat-v3           â˜…â˜…â˜…â˜…   â˜…â˜…â˜…    $      64K
```

> ðŸ’¡ **æç¤º**ï¼šä»·æ ¼å’Œæ€§èƒ½ä¼šéšæ¨¡åž‹æ›´æ–°è€Œå˜åŒ–ï¼Œè¯·ä»¥å„æä¾›å•†å®˜æ–¹æ–‡æ¡£ä¸ºå‡†ã€‚

åˆç†é…ç½®æ¨¡åž‹å’Œå›žé€€ç­–ç•¥ï¼Œèƒ½è®©ä½ çš„ OpenClaw å®žä¾‹åœ¨æ€§èƒ½ã€æˆæœ¬å’Œå¯ç”¨æ€§ä¹‹é—´å–å¾—æœ€ä½³å¹³è¡¡ã€‚

---
> ðŸ’¬ **æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Ÿ** æ¬¢è¿Žåœ¨ä¸‹æ–¹è¯„è®ºåŒºç•™è¨€è®¨è®ºã€‚
