---
title: "ä¼šè¯ç®¡ç†æ·±å…¥"
description: "OpenClaw ä¼šè¯ç®¡ç†æ•™ç¨‹ï¼šç†è§£ Main Session ä¸Ž Group Session çš„åŒºåˆ«ï¼Œæ­£ç¡®éš”ç¦»ä¸Šä¸‹æ–‡ã€ä¿æŠ¤éšç§ã€ä¼˜åŒ–è®°å¿†è¿žç»­æ€§ã€‚"
---

# ä¼šè¯ç®¡ç†æ·±å…¥

OpenClaw çš„ä¼šè¯ï¼ˆSessionï¼‰ç³»ç»Ÿæ˜¯å…¶å¤šå¹³å°ã€å¤šç”¨æˆ·æž¶æž„çš„æ ¸å¿ƒã€‚ç†è§£ä¼šè¯æœºåˆ¶ï¼Œèƒ½å¸®åŠ©ä½ åœ¨å¤æ‚åœºæ™¯ä¸‹æ­£ç¡®éš”ç¦»ä¸Šä¸‹æ–‡ã€ä¿æŠ¤éšç§ã€ä¼˜åŒ– AI çš„è®°å¿†è¿žç»­æ€§ã€‚æœ¬æ–‡å°†æ·±å…¥è®²è§£ä¼šè¯çš„æ¦‚å¿µã€é…ç½®ä¸Žæœ€ä½³å®žè·µã€‚

## Session æ¦‚å¿µï¼šMain Session vs Group Session

OpenClaw ä¸­æœ‰ä¸¤ç§æ ¸å¿ƒä¼šè¯ç±»åž‹ï¼š

### Main Sessionï¼ˆä¸»ä¼šè¯ï¼‰

ä¸»ä¼šè¯æ˜¯ä½ ä¸Ž AI ä¹‹é—´çš„ **ä¸€å¯¹ä¸€ç§èŠä¼šè¯**ã€‚å®ƒå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

- åªæœ‰ä½ å’Œ AI å‚ä¸Ž
- AI å¯ä»¥åŠ è½½ `MEMORY.md`ï¼ˆé•¿æœŸè®°å¿†ï¼‰ï¼Œå› ä¸ºä¸å­˜åœ¨éšç§æ³„éœ²é£Žé™©
- ä¸Šä¸‹æ–‡çª—å£å®Œå…¨å±žäºŽä½ 
- é€‚åˆå¤„ç†ç§å¯†ä»»åŠ¡ã€ä¸ªäººäº‹åŠ¡

### Group Sessionï¼ˆç¾¤ç»„ä¼šè¯ï¼‰

ç¾¤ç»„ä¼šè¯å‘ç”Ÿåœ¨å¤šäººé¢‘é“ä¸­ï¼ˆå¦‚ Discord æœåŠ¡å™¨é¢‘é“ã€Telegram ç¾¤ç»„ï¼‰ï¼š

- å¤šä¸ªç”¨æˆ·å…±äº«åŒä¸€ä¸ªä¼šè¯ä¸Šä¸‹æ–‡
- AI **ä¸ä¼š** åŠ è½½ `MEMORY.md`ï¼Œé¿å…å°†ä½ çš„ç§äººè®°å¿†æš´éœ²ç»™å…¶ä»–äºº
- æ‰€æœ‰å‚ä¸Žè€…çš„æ¶ˆæ¯éƒ½ä¼šè¿›å…¥åŒä¸€ä¸ªä¸Šä¸‹æ–‡çª—å£
- AI éœ€è¦åŒºåˆ†ä¸åŒå‘è¨€è€…

```yaml
# ä¼šè¯ç±»åž‹ç”±é€šé“è‡ªåŠ¨å†³å®š
# ç§èŠ â†’ main session
# ç¾¤ç»„/é¢‘é“ â†’ group session
```

## dmScope é…ç½®

`dmScope` æŽ§åˆ¶ **ç§èŠä¼šè¯çš„éš”ç¦»ç²’åº¦**ã€‚ä¸åŒçš„è®¾ç½®å†³å®šäº†"è°å’Œè°å…±äº«åŒä¸€ä¸ªä¼šè¯"ã€‚

### å››ç§éš”ç¦»çº§åˆ«

```yaml
# openclaw.yaml
agents:
  defaults:
    dmScope: "per-peer"  # é»˜è®¤å€¼
```

| çº§åˆ« | è¯´æ˜Ž | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| `main` | æ‰€æœ‰ç§èŠå…±äº«ä¸€ä¸ªä¼šè¯ | å•ç”¨æˆ·ã€ä¸ªäººåŠ©æ‰‹ |
| `per-peer` | æ¯ä¸ªç”¨æˆ·ç‹¬ç«‹ä¼šè¯ | å¤šç”¨æˆ·åœºæ™¯ï¼ˆæŽ¨èé»˜è®¤ï¼‰ |
| `per-channel-peer` | æ¯ä¸ªå¹³å°+ç”¨æˆ·ç‹¬ç«‹ä¼šè¯ | åŒä¸€ç”¨æˆ·åœ¨ä¸åŒå¹³å°éœ€è¦ä¸åŒä¸Šä¸‹æ–‡ |
| `per-account-channel-peer` | æ¯ä¸ªè´¦å·+å¹³å°+ç”¨æˆ·ç‹¬ç«‹ä¼šè¯ | å¤š Bot è´¦å·è¿è¡Œåœºæ™¯ |

### å®žé™…ç¤ºä¾‹

å‡è®¾ç”¨æˆ· Alice åŒæ—¶é€šè¿‡ Discord å’Œ Telegram ä¸Žä½ çš„ AI ç§èŠï¼š

```yaml
# dmScope: main
# Alice (Discord) å’Œ Alice (Telegram) â†’ åŒä¸€ä¸ªä¼šè¯
# Bob (Discord) â†’ ä¹Ÿæ˜¯åŒä¸€ä¸ªä¼šè¯ï¼ï¼ˆæ‰€æœ‰äººå…±äº«ï¼‰

# dmScope: per-peer
# Alice (Discord) å’Œ Alice (Telegram) â†’ åŒä¸€ä¸ªä¼šè¯ï¼ˆåŒä¸€ç”¨æˆ·ï¼‰
# Bob (Discord) â†’ ç‹¬ç«‹ä¼šè¯

# dmScope: per-channel-peer
# Alice (Discord) â†’ ç‹¬ç«‹ä¼šè¯
# Alice (Telegram) â†’ ç‹¬ç«‹ä¼šè¯
# Bob (Discord) â†’ ç‹¬ç«‹ä¼šè¯

# dmScope: per-account-channel-peer
# Bot1 + Alice (Discord) â†’ ç‹¬ç«‹ä¼šè¯
# Bot2 + Alice (Discord) â†’ ç‹¬ç«‹ä¼šè¯ï¼ˆä¸åŒ Bot è´¦å·ä¹Ÿéš”ç¦»ï¼‰
```

**æŽ¨è**ï¼šå¤§å¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨ `per-peer`ã€‚å¦‚æžœä½ è¿è¡Œå¤šä¸ª Bot å®žä¾‹æœåŠ¡ä¸åŒç¤¾åŒºï¼Œä½¿ç”¨ `per-account-channel-peer`ã€‚

## ä¼šè¯ç”Ÿå‘½å‘¨æœŸ

ä¼šè¯ä¸æ˜¯æ°¸ä¹…å­˜åœ¨çš„â€”â€”å®ƒæœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†æœºåˆ¶ï¼Œé˜²æ­¢ä¸Šä¸‹æ–‡çª—å£æ— é™è†¨èƒ€ã€‚

### Daily Resetï¼ˆæ¯æ—¥é‡ç½®ï¼‰

é»˜è®¤æƒ…å†µä¸‹ï¼Œä¼šè¯åœ¨æ¯å¤©çš„ç‰¹å®šæ—¶é—´è‡ªåŠ¨é‡ç½®ï¼š

```yaml
agents:
  defaults:
    session:
      dailyResetHour: 4  # UTC æ—¶é—´å‡Œæ™¨ 4 ç‚¹é‡ç½®
```

é‡ç½®æ„å‘³ç€ï¼š
- ä¸Šä¸‹æ–‡çª—å£æ¸…ç©º
- AI "å¿˜è®°" å½“å¤©ä¹‹å‰çš„å¯¹è¯ç»†èŠ‚
- ä½† `MEMORY.md` å’Œ `memory/*.md` æ–‡ä»¶ä¸å—å½±å“ï¼ˆæŒä¹…åŒ–è®°å¿†ï¼‰

### Idle Resetï¼ˆç©ºé—²é‡ç½®ï¼‰

å½“ä¼šè¯é•¿æ—¶é—´æ²¡æœ‰æ´»åŠ¨æ—¶ï¼Œä¹Ÿä¼šè‡ªåŠ¨é‡ç½®ï¼š

```yaml
agents:
  defaults:
    session:
      idleResetMinutes: 120  # 2 å°æ—¶æ— æ´»åŠ¨åŽé‡ç½®
```

è¿™æœ‰åŠ©äºŽï¼š
- é‡Šæ”¾ä¸å†éœ€è¦çš„ä¸Šä¸‹æ–‡
- é¿å…ç”¨æˆ·å›žæ¥æ—¶çœ‹åˆ°è¿‡æ—¶çš„å¯¹è¯ä¸Šä¸‹æ–‡
- èŠ‚çœ token æ¶ˆè€—

### ç”Ÿå‘½å‘¨æœŸæµç¨‹

```
ç”¨æˆ·å‘é€æ¶ˆæ¯
    â†“
æ£€æŸ¥æ˜¯å¦å­˜åœ¨æ´»è·ƒä¼šè¯
    â†“ æ˜¯                    â†“ å¦
æ£€æŸ¥æ˜¯å¦è¿‡æœŸ              åˆ›å»ºæ–°ä¼šè¯
(daily/idle)              åŠ è½½ç³»ç»Ÿæç¤º
    â†“ æ˜¯     â†“ å¦          åŠ è½½è®°å¿†æ–‡ä»¶
é‡ç½®ä¼šè¯   ç»§ç»­å¯¹è¯          â†“
    â†“                     å¼€å§‹å¯¹è¯
åˆ›å»ºæ–°ä¼šè¯
```

## ä¼šè¯éš”ç¦»ä¸Žå®‰å…¨

åœ¨å¤šç”¨æˆ·åœºæ™¯ä¸‹ï¼Œä¼šè¯éš”ç¦»ç›´æŽ¥å…³ç³»åˆ° **ç”¨æˆ·éšç§**ã€‚

### éšç§ä¿æŠ¤åŽŸåˆ™

1. **MEMORY.md ä»…åœ¨ä¸»ä¼šè¯åŠ è½½**ï¼šç¾¤èŠä¸­ä¸ä¼šæ³„éœ²ä½ çš„ç§äººç¬”è®°
2. **per-peer éš”ç¦»ç¡®ä¿ç”¨æˆ·é—´ä¸ä¸²è¯**ï¼šAlice çœ‹ä¸åˆ° Bob çš„å¯¹è¯åŽ†å²
3. **æ–‡ä»¶ç³»ç»Ÿæƒé™**ï¼šä¼šè¯æ•°æ®å­˜å‚¨åœ¨ `~/.openclaw/sessions/` ç›®å½•ä¸‹ï¼ŒæŒ‰ä¼šè¯ ID éš”ç¦»

### å¤šç”¨æˆ·åœºæ™¯é…ç½®å»ºè®®

```yaml
# é¢å‘å¤šç”¨æˆ·çš„å®‰å…¨é…ç½®
agents:
  defaults:
    dmScope: "per-peer"
    session:
      dailyResetHour: 4
      idleResetMinutes: 60  # ç¼©çŸ­ç©ºé—²æ—¶é—´ï¼Œæ›´å¿«é‡Šæ”¾ä¸Šä¸‹æ–‡
```

### ç¾¤ç»„ä¼šè¯çš„æ³¨æ„äº‹é¡¹

åœ¨ç¾¤ç»„ä¼šè¯ä¸­ï¼š
- æ‰€æœ‰æˆå‘˜çš„æ¶ˆæ¯éƒ½å¯¹ AI å¯è§
- AI çš„å›žå¤å¯¹æ‰€æœ‰æˆå‘˜å¯è§
- ä¸è¦åœ¨ç¾¤ç»„ä¸­è®© AI å¤„ç†æ•æ„Ÿä¿¡æ¯
- è€ƒè™‘ä½¿ç”¨ `/dm` å°†æ•æ„Ÿå¯¹è¯è½¬åˆ°ç§èŠ

## resetTriggersï¼šæ‰‹åŠ¨é‡ç½®ä¼šè¯

æœ‰æ—¶ä½ éœ€è¦æ‰‹åŠ¨æ¸…ç©ºå½“å‰ä¼šè¯ï¼Œå¼€å§‹ä¸€æ®µå…¨æ–°çš„å¯¹è¯ã€‚OpenClaw æä¾›äº† **é‡ç½®è§¦å‘å™¨**ã€‚

### å†…ç½®é‡ç½®å‘½ä»¤

```
/new    â€” å¼€å§‹æ–°ä¼šè¯ï¼ˆæ¸…ç©ºä¸Šä¸‹æ–‡ï¼‰
/reset  â€” é‡ç½®å½“å‰ä¼šè¯ï¼ˆæ•ˆæžœç›¸åŒï¼‰
```

### é…ç½®è‡ªå®šä¹‰è§¦å‘å™¨

```yaml
agents:
  defaults:
    session:
      resetTriggers:
        - "/new"
        - "/reset"
        - "/clear"
        - "é‡æ–°å¼€å§‹"  # æ”¯æŒè‡ªç„¶è¯­è¨€è§¦å‘
```

### ä½¿ç”¨åœºæ™¯

- **åˆ‡æ¢è¯é¢˜**ï¼šä»Žå†™ä»£ç åˆ‡æ¢åˆ°èŠå¤©ï¼Œé¿å…æ— å…³ä¸Šä¸‹æ–‡å¹²æ‰°
- **è°ƒè¯•é—®é¢˜**ï¼šAI å›žå¤å¼‚å¸¸æ—¶ï¼Œé‡ç½®ä¼šè¯æŽ’é™¤ä¸Šä¸‹æ–‡æ±¡æŸ“
- **éšç§è€ƒè™‘**ï¼šè®¨è®ºå®Œæ•æ„Ÿè¯é¢˜åŽæ¸…ç©ºä¸Šä¸‹æ–‡

## å®Œæ•´é…ç½®ç¤ºä¾‹

ä»¥ä¸‹æ˜¯ä¸€ä¸ªé¢å‘ç”Ÿäº§çŽ¯å¢ƒçš„å®Œæ•´ä¼šè¯é…ç½®ï¼š

```yaml
# openclaw.yaml â€” ä¼šè¯ç®¡ç†é…ç½®
agents:
  defaults:
    # ä¼šè¯éš”ç¦»çº§åˆ«
    dmScope: "per-peer"

    session:
      # æ¯æ—¥é‡ç½®æ—¶é—´ï¼ˆUTCï¼‰
      dailyResetHour: 4

      # ç©ºé—²é‡ç½®æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰
      idleResetMinutes: 90

      # æ‰‹åŠ¨é‡ç½®è§¦å‘å™¨
      resetTriggers:
        - "/new"
        - "/reset"

      # ä¸Šä¸‹æ–‡çª—å£ç®¡ç†
      # å½“ä¸Šä¸‹æ–‡æŽ¥è¿‘æ¨¡åž‹é™åˆ¶æ—¶ï¼Œè‡ªåŠ¨åŽ‹ç¼©æ—§æ¶ˆæ¯
      compaction:
        enabled: true
        # åŽ‹ç¼©å‰è‡ªåŠ¨åˆ·æ–°è®°å¿†åˆ°æ–‡ä»¶
        preCompactionMemoryFlush: true
```

### é’ˆå¯¹ä¸åŒåœºæ™¯çš„é…ç½®è°ƒä¼˜

```yaml
# åœºæ™¯ä¸€ï¼šä¸ªäººåŠ©æ‰‹ï¼ˆå•ç”¨æˆ·ï¼‰
agents:
  defaults:
    dmScope: "main"
    session:
      idleResetMinutes: 480  # 8å°æ—¶ï¼Œä¿æŒé•¿å¯¹è¯
      dailyResetHour: 5

# åœºæ™¯äºŒï¼šç¤¾åŒº Botï¼ˆå¤šç”¨æˆ·ï¼‰
agents:
  defaults:
    dmScope: "per-peer"
    session:
      idleResetMinutes: 30   # 30åˆ†é’Ÿï¼Œå¿«é€Ÿé‡Šæ”¾
      dailyResetHour: 4
      resetTriggers:
        - "/new"
        - "/reset"

# åœºæ™¯ä¸‰ï¼šä¼ä¸šå¤š Bot éƒ¨ç½²
agents:
  defaults:
    dmScope: "per-account-channel-peer"
    session:
      idleResetMinutes: 60
      dailyResetHour: 0  # UTC åˆå¤œé‡ç½®
```

## è°ƒè¯•æŠ€å·§

å½“ä¼šè¯è¡Œä¸ºä¸ç¬¦åˆé¢„æœŸæ—¶ï¼š

1. **æŸ¥çœ‹å½“å‰ä¼šè¯çŠ¶æ€**ï¼šä½¿ç”¨ `/status` å‘½ä»¤æŸ¥çœ‹å½“å‰ä¼šè¯çš„å…ƒä¿¡æ¯
2. **æ£€æŸ¥æ—¥å¿—**ï¼š`openclaw logs` ä¸­ä¼šè®°å½•ä¼šè¯çš„åˆ›å»ºã€é‡ç½®äº‹ä»¶
3. **ç¡®è®¤ dmScope**ï¼šå¤šç”¨æˆ·é—®é¢˜å¤šåŠæ˜¯ dmScope è®¾ç½®ä¸å½“
4. **æ‰‹åŠ¨é‡ç½®æµ‹è¯•**ï¼šå‘é€ `/new` éªŒè¯é‡ç½®æœºåˆ¶æ˜¯å¦æ­£å¸¸å·¥ä½œ

```bash
# æŸ¥çœ‹ä¼šè¯ç›¸å…³æ—¥å¿—
openclaw logs | grep -i session
```

æŽŒæ¡ä¼šè¯ç®¡ç†ï¼Œæ˜¯æž„å»ºç¨³å®šã€å®‰å…¨çš„ OpenClaw åº”ç”¨çš„åŸºç¡€ã€‚åˆç†é…ç½®ä¼šè¯éš”ç¦»å’Œç”Ÿå‘½å‘¨æœŸï¼Œèƒ½è®©ä½ çš„ AI åŠ©æ‰‹åœ¨å¤šç”¨æˆ·ã€å¤šå¹³å°çŽ¯å¢ƒä¸­å¯é è¿è¡Œã€‚

---
> ðŸ’¬ **æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Ÿ** æ¬¢è¿Žåœ¨ä¸‹æ–¹è¯„è®ºåŒºç•™è¨€è®¨è®ºã€‚
