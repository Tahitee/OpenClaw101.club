---
title: æŽ¥å…¥ä¼ä¸šå¾®ä¿¡
description: å°† OpenClaw æŽ¥å…¥ä¼ä¸šå¾®ä¿¡çš„å®Œæ•´æ•™ç¨‹
---

# æŽ¥å…¥ä¼ä¸šå¾®ä¿¡

ä¼ä¸šå¾®ä¿¡ï¼ˆWeCom / WeChat Workï¼‰æ˜¯è…¾è®¯å‡ºå“çš„ä¼ä¸šé€šè®¯å·¥å…·ï¼Œä¸Žå¾®ä¿¡äº’é€šï¼Œåœ¨å›½å†…ä¼ä¸šä¸­ä½¿ç”¨å¹¿æ³›ã€‚OpenClaw æä¾›äº†**å®˜æ–¹ä¼ä¸šå¾®ä¿¡æ’ä»¶**ï¼Œæ”¯æŒé€šè¿‡ä¼ä¸šå¾®ä¿¡åº”ç”¨æŽ¥æ”¶å’Œå‘é€æ¶ˆæ¯ã€‚

å¦‚æžœä½ æƒ³åœ¨å¾®ä¿¡ç”Ÿæ€ä¸­ä½¿ç”¨ AI åŠ©æ‰‹ï¼Œä¼ä¸šå¾®ä¿¡æ˜¯ç›®å‰**æœ€æŽ¨èçš„æ–¹æ¡ˆ**â€”â€”åˆè§„ã€ç¨³å®šã€ä¸ä¼šè¢«å°å·ã€‚

---

## ä¸€ã€ä¼ä¸šå¾®ä¿¡ç®¡ç†åŽå°åˆ›å»ºåº”ç”¨

### 1.1 æ³¨å†Œä¼ä¸šå¾®ä¿¡

å¦‚æžœä½ çš„ä¼ä¸šè¿˜æ²¡æœ‰ä¼ä¸šå¾®ä¿¡ï¼Œéœ€è¦å…ˆæ³¨å†Œï¼š

1. è®¿é—® [ä¼ä¸šå¾®ä¿¡å®˜ç½‘](https://work.weixin.qq.com/)
2. ç‚¹å‡» **ä¼ä¸šæ³¨å†Œ**ï¼ŒæŒ‰æç¤ºå®Œæˆæ³¨å†Œæµç¨‹
3. ä½ ä¹Ÿå¯ä»¥ä¸ªäººæ³¨å†Œä¸€ä¸ªå°åž‹å›¢é˜Ÿæ¥ä½¿ç”¨

> ðŸ’¡ **æç¤ºï¼š** ä¸ªäººä¹Ÿå¯ä»¥æ³¨å†Œä¼ä¸šå¾®ä¿¡ã€‚æ³¨å†Œæ—¶é€‰æ‹©"å›¢é˜Ÿ/å°åž‹ç»„ç»‡"å³å¯ï¼Œä¸éœ€è¦çœŸå®žçš„ä¼ä¸šèµ„è´¨ã€‚

### 1.2 åˆ›å»ºè‡ªå»ºåº”ç”¨

1. ç™»å½• [ä¼ä¸šå¾®ä¿¡ç®¡ç†åŽå°](https://work.weixin.qq.com/wework_admin/frame)
2. è¿›å…¥ **åº”ç”¨ç®¡ç†** â†’ **è‡ªå»º** â†’ **åˆ›å»ºåº”ç”¨**
3. å¡«å†™åº”ç”¨ä¿¡æ¯ï¼š
   - åº”ç”¨åç§°ï¼šå¦‚ `OpenClaw AI`
   - åº”ç”¨ Logoï¼šä¸Šä¼ ä¸€ä¸ªå›¾æ ‡
   - å¯è§èŒƒå›´ï¼šé€‰æ‹©å“ªäº›éƒ¨é—¨/æˆå‘˜å¯ä»¥çœ‹åˆ°è¿™ä¸ªåº”ç”¨
4. ç‚¹å‡»åˆ›å»º

### 1.3 é…ç½®åº”ç”¨

åˆ›å»ºå®ŒæˆåŽï¼Œè¿›å…¥åº”ç”¨è¯¦æƒ…é¡µï¼š

1. åœ¨ **åŠŸèƒ½** åŒºåŸŸï¼Œç¡®ä¿ **æŽ¥æ”¶æ¶ˆæ¯** åŠŸèƒ½å·²å¼€å¯
2. è®¾ç½® **API æŽ¥æ”¶æ¶ˆæ¯** çš„å›žè°ƒé…ç½®ï¼š
   - **URL**ï¼šå¡«å†™ä½ çš„ OpenClaw Gateway çš„å…¬ç½‘åœ°å€ï¼ˆå¦‚ `https://your-domain.com/wecom/callback`ï¼‰
   - **Token**ï¼šè‡ªå®šä¹‰ä¸€ä¸ªéšæœºå­—ç¬¦ä¸²
   - **EncodingAESKey**ï¼šç‚¹å‡»éšæœºç”Ÿæˆï¼Œæˆ–è‡ªå®šä¹‰ä¸€ä¸ª 43 ä½çš„å­—ç¬¦ä¸²

> âš ï¸ **æ³¨æ„ï¼š** ä¼ä¸šå¾®ä¿¡ä½¿ç”¨ HTTP å›žè°ƒæ¨¡å¼ï¼Œ**éœ€è¦ä½ çš„ OpenClaw Gateway æœ‰ä¸€ä¸ªå¯ä»¥è¢«ä¼ä¸šå¾®ä¿¡æœåŠ¡å™¨è®¿é—®åˆ°çš„å…¬ç½‘åœ°å€**ã€‚å¯ä»¥ä½¿ç”¨ Tailscale Funnelã€Cloudflare Tunnelã€Nginx åå‘ä»£ç†ç­‰æ–¹æ¡ˆæš´éœ²ä½ çš„ Gatewayã€‚

---

## äºŒã€èŽ·å– Corp IDã€Agent IDã€Secret

åœ¨ä¼ä¸šå¾®ä¿¡ç®¡ç†åŽå°ä¸­ï¼Œéœ€è¦èŽ·å–ä»¥ä¸‹ä¸‰ä¸ªå…³é”®ä¿¡æ¯ï¼š

### 2.1 Corp IDï¼ˆä¼ä¸š IDï¼‰

1. è¿›å…¥ **æˆ‘çš„ä¼ä¸š** â†’ **ä¼ä¸šä¿¡æ¯**
2. åœ¨é¡µé¢åº•éƒ¨æ‰¾åˆ° **ä¼ä¸š ID**
3. æ ¼å¼ç±»ä¼¼ï¼š`ww1234567890abcdef`

### 2.2 Agent IDï¼ˆåº”ç”¨ IDï¼‰

1. è¿›å…¥ **åº”ç”¨ç®¡ç†** â†’ æ‰¾åˆ°ä½ åˆ›å»ºçš„åº”ç”¨
2. åœ¨åº”ç”¨è¯¦æƒ…é¡µå¯ä»¥çœ‹åˆ° **AgentId**
3. è¿™æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå¦‚ `1000002`

### 2.3 Secretï¼ˆåº”ç”¨å¯†é’¥ï¼‰

1. åœ¨åŒä¸€ä¸ªåº”ç”¨è¯¦æƒ…é¡µ
2. æ‰¾åˆ° **Secret**ï¼Œç‚¹å‡»æŸ¥çœ‹
3. è¿™æ˜¯ä¸€ä¸²éšæœºå­—ç¬¦ä¸²ï¼Œå¦¥å–„ä¿ç®¡

---

## ä¸‰ã€OpenClaw é…ç½®

### 3.1 ç¼–è¾‘é…ç½®æ–‡ä»¶

æ‰“å¼€ `~/.openclaw/openclaw.json`ï¼Œåœ¨ `channels` ä¸­æ·»åŠ ä¼ä¸šå¾®ä¿¡é…ç½®ï¼š

```json
{
  "channels": {
    "wecom": {
      "enabled": true,
      "corpId": "ww1234567890abcdef",
      "agentId": 1000002,
      "secret": "your_app_secret_here",
      "token": "your_callback_token_here",
      "encodingAESKey": "your_43_char_encoding_aes_key_here_abcdefghij"
    }
  }
}
```

å„å­—æ®µè¯´æ˜Žï¼š

| å­—æ®µ | è¯´æ˜Ž |
|------|------|
| `corpId` | ä¼ä¸š IDï¼Œåœ¨"æˆ‘çš„ä¼ä¸š"é¡µé¢èŽ·å– |
| `agentId` | åº”ç”¨çš„ Agent ID |
| `secret` | åº”ç”¨çš„ Secret å¯†é’¥ |
| `token` | API æŽ¥æ”¶æ¶ˆæ¯çš„ Tokenï¼ˆéœ€è¦å’Œç®¡ç†åŽå°ä¸€è‡´ï¼‰ |
| `encodingAESKey` | API æŽ¥æ”¶æ¶ˆæ¯çš„ EncodingAESKeyï¼ˆéœ€è¦å’Œç®¡ç†åŽå°ä¸€è‡´ï¼‰ |

### 3.2 é…ç½®å›žè°ƒ URL

ä¼ä¸šå¾®ä¿¡éœ€è¦éªŒè¯å›žè°ƒ URL çš„æœ‰æ•ˆæ€§ã€‚ç¡®ä¿ä½ çš„ OpenClaw Gateway å·²å¯åŠ¨å¹¶ä¸”å¯ä»¥é€šè¿‡å…¬ç½‘è®¿é—®ï¼š

```bash
# å¯åŠ¨ Gateway
openclaw gateway start

# æ£€æŸ¥çŠ¶æ€
openclaw gateway status
```

å¦‚æžœä½ ä½¿ç”¨äº† Tailscaleï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æš´éœ² Gatewayï¼š

```bash
# ä½¿ç”¨ Tailscale Funnel æš´éœ²ç«¯å£
tailscale funnel 18789
```

ç„¶åŽå›žåˆ°ä¼ä¸šå¾®ä¿¡ç®¡ç†åŽå°ï¼Œå¡«å†™å›žè°ƒ URL å¹¶ç‚¹å‡»ä¿å­˜ã€‚ä¼ä¸šå¾®ä¿¡ä¼šå‘é€ä¸€ä¸ªéªŒè¯è¯·æ±‚ï¼ŒOpenClaw ä¼šè‡ªåŠ¨å¤„ç†ã€‚

### 3.3 é‡å¯ Gateway

```bash
openclaw gateway restart
```

---

## å››ã€åº”ç”¨æ¶ˆæ¯æŽ¨é€

### 4.1 æŽ¥æ”¶æ¶ˆæ¯

é…ç½®å®ŒæˆåŽï¼Œä¼ä¸šå¾®ä¿¡ä¸­çš„ç”¨æˆ·å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¸Ž AI å¯¹è¯ï¼š

- **åœ¨å·¥ä½œå°æ‰¾åˆ°åº”ç”¨**ï¼šæ‰“å¼€ä¼ä¸šå¾®ä¿¡ â†’ å·¥ä½œå° â†’ æ‰¾åˆ°ä½ çš„åº”ç”¨ â†’ å‘é€æ¶ˆæ¯
- **åœ¨èŠå¤©ä¸­æœç´¢åº”ç”¨**ï¼šç›´æŽ¥æœç´¢åº”ç”¨åç§°å¼€å§‹å¯¹è¯

### 4.2 å‘é€æ¶ˆæ¯

OpenClaw é€šè¿‡ä¼ä¸šå¾®ä¿¡ API å‘é€æ¶ˆæ¯ç»™ç”¨æˆ·ã€‚æ”¯æŒä»¥ä¸‹æ¶ˆæ¯ç±»åž‹ï¼š

- **æ–‡æœ¬æ¶ˆæ¯**ï¼šæœ€å¸¸ç”¨ï¼Œæ”¯æŒæ¢è¡Œå’ŒåŸºæœ¬æ ¼å¼
- **Markdown æ¶ˆæ¯**ï¼šæ”¯æŒéƒ¨åˆ† Markdown è¯­æ³•ï¼ˆåŠ ç²—ã€é“¾æŽ¥ç­‰ï¼‰
- **å›¾ç‰‡/æ–‡ä»¶**ï¼šæ”¯æŒå‘é€å›¾ç‰‡å’Œæ–‡ä»¶é™„ä»¶

### 4.3 ä¼šè¯ç®¡ç†

- æ¯ä¸ªç”¨æˆ·ä¸Žåº”ç”¨çš„å¯¹è¯ä¼šæ˜ å°„åˆ°ç‹¬ç«‹çš„ OpenClaw session
- ä¼ä¸šå¾®ä¿¡ç›®å‰ä¸»è¦æ”¯æŒ**å•èŠæ¨¡å¼**ï¼ˆç”¨æˆ·å’Œåº”ç”¨ä¹‹é—´ï¼‰

---

## äº”ã€æ³¨æ„äº‹é¡¹

### 5.1 å…¬ç½‘è®¿é—®è¦æ±‚

è¿™æ˜¯ä¼ä¸šå¾®ä¿¡æŽ¥å…¥æœ€å¤§çš„"é—¨æ§›"ã€‚ä¼ä¸šå¾®ä¿¡ä½¿ç”¨ HTTP å›žè°ƒæ¨¡å¼ï¼ˆä¸åƒé£žä¹¦å’Œé’‰é’‰æ”¯æŒ WebSocketï¼‰ï¼Œæ‰€ä»¥ä½ éœ€è¦ï¼š

- ä¸€ä¸ªå…¬ç½‘å¯è®¿é—®çš„åœ°å€
- æˆ–ä½¿ç”¨å†…ç½‘ç©¿é€å·¥å…·ï¼ˆå¦‚ Tailscale Funnelã€frpã€Cloudflare Tunnel ç­‰ï¼‰

**æŽ¨èæ–¹æ¡ˆï¼š**

```bash
# æ–¹æ¡ˆ1ï¼šTailscale Funnelï¼ˆæœ€ç®€å•ï¼‰
tailscale funnel 18789

# æ–¹æ¡ˆ2ï¼šCloudflare Tunnel
cloudflared tunnel --url http://localhost:18789

# æ–¹æ¡ˆ3ï¼šNginx åå‘ä»£ç†ï¼ˆéœ€è¦æœ‰å…¬ç½‘æœåŠ¡å™¨ï¼‰
# åœ¨ nginx.conf ä¸­é…ç½®åå‘ä»£ç†åˆ° OpenClaw Gateway ç«¯å£
```

### 5.2 IP ç™½åå•

ä¼ä¸šå¾®ä¿¡å¯èƒ½éœ€è¦é…ç½® **å¯ä¿¡åŸŸå** å’Œ **IP ç™½åå•**ã€‚åœ¨åº”ç”¨è®¾ç½®ä¸­ï¼š

1. å¡«å†™ä½ çš„æœåŠ¡å™¨ IP åˆ° **ä¼ä¸šå¯ä¿¡ IP**
2. å¦‚æžœä½¿ç”¨äº† Tunnel æœåŠ¡ï¼Œå¡«å†™å¯¹åº”çš„ IP

### 5.3 æ¶ˆæ¯åŠ è§£å¯†

ä¼ä¸šå¾®ä¿¡çš„æ¶ˆæ¯ä¼ è¾“ä½¿ç”¨ AES åŠ å¯†ã€‚OpenClaw çš„ä¼ä¸šå¾®ä¿¡æ’ä»¶ä¼šè‡ªåŠ¨å¤„ç†åŠ è§£å¯†è¿‡ç¨‹ï¼Œä½ åªéœ€è¦ç¡®ä¿ `token` å’Œ `encodingAESKey` é…ç½®æ­£ç¡®å³å¯ã€‚

### 5.4 æ¶ˆæ¯é¢‘çŽ‡é™åˆ¶

ä¼ä¸šå¾®ä¿¡å¯¹åº”ç”¨æ¶ˆæ¯æœ‰ä»¥ä¸‹é™åˆ¶ï¼š

- æ¯ä¸ªåº”ç”¨æ¯åˆ†é’Ÿæœ€å¤šå‘é€ 200 æ¡æ¶ˆæ¯
- æ¯ä¸ªåº”ç”¨æ¯å¤©æœ€å¤šå‘é€ 10000 æ¡æ¶ˆæ¯ï¼ˆå…·ä½“é™åˆ¶å–å†³äºŽä¼ä¸šè§„æ¨¡ï¼‰

### 5.5 ä¸Žå¾®ä¿¡äº’é€š

ä¼ä¸šå¾®ä¿¡å¯ä»¥ä¸Žå¾®ä¿¡äº’é€šï¼š
- ä¼ä¸šå¾®ä¿¡ç”¨æˆ·å¯ä»¥æ·»åŠ å¾®ä¿¡ç”¨æˆ·ä¸ºå¤–éƒ¨è”ç³»äºº
- ä½†æœºå™¨äººåº”ç”¨ç›®å‰**ä¸èƒ½ç›´æŽ¥ä¸Žå¾®ä¿¡ç”¨æˆ·å¯¹è¯**
- å¦‚æžœä½ æƒ³é€šè¿‡å¾®ä¿¡ä½¿ç”¨ AIï¼Œå‚è€ƒ [å¾®ä¿¡ä¸ªäººå·æŽ¥å…¥åˆ†æž](/channels/wechat)

### 5.6 å®‰å…¨å»ºè®®

- **Secret ä¿å¯†**ï¼šä¸è¦æ³„éœ² corpIdã€secretã€tokenã€encodingAESKey
- **é™åˆ¶å¯è§èŒƒå›´**ï¼šåœ¨åº”ç”¨è®¾ç½®ä¸­ï¼Œå°†å¯è§èŒƒå›´é™åˆ¶ä¸ºéœ€è¦ä½¿ç”¨çš„äººå‘˜
- **å®šæœŸè½®æ¢å¯†é’¥**ï¼šå»ºè®®å®šæœŸæ›´æ¢ Secret å’Œ Token

### 5.7 è°ƒè¯•

```bash
# æŸ¥çœ‹æ—¥å¿—
tail -f /tmp/openclaw/openclaw-$(date +%Y-%m-%d).log | grep -i wecom

# æ£€æŸ¥ Gateway çŠ¶æ€
openclaw gateway status
```

å¸¸è§é—®é¢˜ï¼š
- **å›žè°ƒéªŒè¯å¤±è´¥**ï¼šæ£€æŸ¥ Token å’Œ EncodingAESKey æ˜¯å¦ä¸Žç®¡ç†åŽå°ä¸€è‡´
- **æ”¶ä¸åˆ°æ¶ˆæ¯**ï¼šç¡®è®¤å›žè°ƒ URL å¯ä»¥è¢«å…¬ç½‘è®¿é—®ï¼Œæ£€æŸ¥é˜²ç«å¢™è®¾ç½®
- **å‘é€å¤±è´¥**ï¼šæ£€æŸ¥ corpIdã€agentIdã€secret æ˜¯å¦æ­£ç¡®ï¼ŒIP æ˜¯å¦åœ¨ç™½åå•ä¸­

---

> ðŸ’¬ **æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Ÿ** æ¬¢è¿Žåœ¨ä¸‹æ–¹è¯„è®ºåŒºç•™è¨€è®¨è®ºã€‚
