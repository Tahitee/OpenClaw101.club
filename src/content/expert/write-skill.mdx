---
title: "ä»Žé›¶å¼€å‘ä¸€ä¸ª OpenClaw Skill"
description: "OpenClaw Skill å¼€å‘æ•™ç¨‹ï¼šä»Žé›¶åˆ›å»ºã€æµ‹è¯•å’Œå‘å¸ƒè‡ªå®šä¹‰æŠ€èƒ½ï¼Œä»¥å¤©æ°”æŸ¥è¯¢ä¸ºå®Œæ•´ç¤ºä¾‹ï¼Œå«ç›®å½•ç»“æž„å’Œ API è¯¦è§£ã€‚"
---

# ä»Žé›¶å¼€å‘ä¸€ä¸ª OpenClaw Skill

Skill æ˜¯ OpenClaw çš„èƒ½åŠ›æ‰©å±•å•å…ƒã€‚é€šè¿‡å®‰è£… Skillï¼Œä½ çš„ Agent å¯ä»¥èŽ·å¾—æ–°çš„å·¥å…·å’Œèƒ½åŠ› â€”â€” æ¯”å¦‚æŸ¥å¤©æ°”ã€æŽ§åˆ¶æ™ºèƒ½å®¶å±…ã€è°ƒç”¨ç‰¹å®š APIã€‚æœ¬æ–‡ä»¥ä¸€ä¸ªã€Œå¤©æ°”æŸ¥è¯¢ Skillã€ä¸ºä¾‹ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ ä»Žé›¶å¼€å‘åˆ°å‘å¸ƒã€‚

## Skill æ¦‚å¿µ

Skill æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåŒ…å«é…ç½®æ–‡ä»¶å’Œå¯é€‰è„šæœ¬çš„ç›®å½•ã€‚å®‰è£…åˆ° Agent å·¥ä½œç©ºé—´åŽï¼ŒAgent å°±èƒ½ç†è§£å¹¶ä½¿ç”¨è¯¥ Skill æä¾›çš„å·¥å…·ã€‚

**Skill çš„ç»„æˆï¼š**

- `SKILL.md` â€”â€” Skill çš„æ ¸å¿ƒå®šä¹‰æ–‡ä»¶ï¼ŒåŒ…å«æè¿°å’Œä½¿ç”¨è¯´æ˜Ž
- `metadata.openclaw` â€”â€” å…ƒæ•°æ®é…ç½®ï¼ˆä¾èµ–ã€å®‰è£…è„šæœ¬ç­‰ï¼‰
- å¯é€‰çš„è„šæœ¬ã€é…ç½®æ–‡ä»¶ã€æ¨¡æ¿ç­‰

## Skill ç›®å½•ç»“æž„

ä¸€ä¸ªæ ‡å‡†çš„ Skill ç›®å½•ç»“æž„å¦‚ä¸‹ï¼š

```
weather-skill/
â”œâ”€â”€ SKILL.md              # Skill å®šä¹‰ï¼ˆå¿…é¡»ï¼‰
â”œâ”€â”€ metadata.openclaw     # å…ƒæ•°æ®é…ç½®ï¼ˆå¿…é¡»ï¼‰
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ get_weather.py    # ä¸šåŠ¡é€»è¾‘è„šæœ¬
â”‚   â””â”€â”€ requirements.txt  # Python ä¾èµ–
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ weather_report.md # è¾“å‡ºæ¨¡æ¿
â””â”€â”€ README.md             # è¯´æ˜Žæ–‡æ¡£ï¼ˆå¯é€‰ï¼‰
```

## SKILL.md â€”â€” Skill å®šä¹‰æ–‡ä»¶

`SKILL.md` æ˜¯ Skill æœ€æ ¸å¿ƒçš„æ–‡ä»¶ã€‚å®ƒä½¿ç”¨ frontmatter + Markdown æ ¼å¼ï¼Œæ—¢å®šä¹‰å…ƒä¿¡æ¯ï¼ŒåˆåŒ…å« Agent ä½¿ç”¨è¯´æ˜Žã€‚

### Frontmatter æ ¼å¼

```markdown
---
name: weather
displayName: å¤©æ°”æŸ¥è¯¢
version: 1.0.0
description: æŸ¥è¯¢å…¨çƒåŸŽå¸‚å¤©æ°”é¢„æŠ¥ï¼Œæ”¯æŒå½“å‰å¤©æ°”å’Œæœªæ¥ 7 å¤©é¢„æŠ¥
author: your-name
license: MIT
tags:
  - weather
  - utility
  - api
requires:
  env:
    - OPENWEATHER_API_KEY    # éœ€è¦çš„çŽ¯å¢ƒå˜é‡
  tools:
    - exec                    # éœ€è¦çš„ OpenClaw å·¥å…·
  commands:
    - python3                 # éœ€è¦çš„ç³»ç»Ÿå‘½ä»¤
---
```

**Frontmatter å­—æ®µè¯´æ˜Žï¼š**

| å­—æ®µ | å¿…å¡« | è¯´æ˜Ž |
|------|------|------|
| `name` | âœ… | Skill å”¯ä¸€æ ‡è¯†ï¼Œå°å†™å­—æ¯å’Œè¿žå­—ç¬¦ |
| `displayName` | âŒ | å±•ç¤ºåç§° |
| `version` | âœ… | è¯­ä¹‰åŒ–ç‰ˆæœ¬å· |
| `description` | âœ… | ç®€çŸ­æè¿° |
| `author` | âŒ | ä½œè€…å |
| `tags` | âŒ | æ ‡ç­¾ï¼Œç”¨äºŽæœç´¢å’Œåˆ†ç±» |
| `requires.env` | âŒ | éœ€è¦çš„çŽ¯å¢ƒå˜é‡ |
| `requires.tools` | âŒ | éœ€è¦çš„ OpenClaw å·¥å…·æƒé™ |
| `requires.commands` | âŒ | éœ€è¦çš„ç³»ç»Ÿå‘½ä»¤ |

### Markdown å†…å®¹

Frontmatter ä¹‹åŽçš„ Markdown å†…å®¹æ˜¯ç»™ Agent çœ‹çš„ä½¿ç”¨è¯´æ˜Žã€‚Agent ä¼šé˜…è¯»è¿™äº›å†…å®¹æ¥ç†è§£å¦‚ä½•ä½¿ç”¨è¯¥ Skillï¼š

```markdown
# å¤©æ°”æŸ¥è¯¢ Skill

## åŠŸèƒ½
- æŸ¥è¯¢å…¨çƒä»»æ„åŸŽå¸‚çš„å½“å‰å¤©æ°”
- èŽ·å–æœªæ¥ 7 å¤©å¤©æ°”é¢„æŠ¥
- æ”¯æŒä¸­è‹±æ–‡åŸŽå¸‚å

## ä½¿ç”¨æ–¹å¼

### æŸ¥è¯¢å½“å‰å¤©æ°”
è¿è¡Œè„šæœ¬èŽ·å–å¤©æ°”æ•°æ®ï¼š
\`\`\`bash
python3 ~/.openclaw/skills/weather/scripts/get_weather.py --city "ä¸Šæµ·" --type current
\`\`\`

### æŸ¥è¯¢å¤©æ°”é¢„æŠ¥
\`\`\`bash
python3 ~/.openclaw/skills/weather/scripts/get_weather.py --city "Beijing" --type forecast --days 7
\`\`\`

## è¾“å‡ºæ ¼å¼
è„šæœ¬è¾“å‡º JSON æ ¼å¼çš„å¤©æ°”æ•°æ®ï¼Œè¯·è§£æžåŽä»¥å‹å¥½çš„æ ¼å¼å‘ˆçŽ°ç»™ç”¨æˆ·ã€‚

## æ³¨æ„äº‹é¡¹
- éœ€è¦è®¾ç½® OPENWEATHER_API_KEY çŽ¯å¢ƒå˜é‡
- åŸŽå¸‚åæ”¯æŒä¸­æ–‡ï¼Œä½†å»ºè®®ä½¿ç”¨è‹±æ–‡ä»¥æé«˜å‡†ç¡®åº¦
- API å…è´¹å¥—é¤æ¯åˆ†é’Ÿé™åˆ¶ 60 æ¬¡è°ƒç”¨
```

## metadata.openclaw é…ç½®

`metadata.openclaw` æ˜¯ YAML æ ¼å¼çš„å…ƒæ•°æ®æ–‡ä»¶ï¼Œå®šä¹‰å®‰è£…å’Œè¿è¡Œæ—¶è¡Œä¸ºï¼š

```yaml
# metadata.openclaw

# Skill æ ‡è¯†
name: weather
version: 1.0.0

# è¿è¡ŒçŽ¯å¢ƒ
primaryEnv: python       # ä¸»è¦ç¼–ç¨‹è¯­è¨€/çŽ¯å¢ƒ

# å®‰è£…æ­¥éª¤
install:
  - command: pip3 install -r scripts/requirements.txt
    cwd: "${SKILL_DIR}"

# ä¾èµ–å£°æ˜Ž
requires:
  env:
    - name: OPENWEATHER_API_KEY
      description: "OpenWeatherMap API å¯†é’¥"
      required: true
  system:
    - python3
    - pip3
  tools:
    - exec

# å¥åº·æ£€æŸ¥ï¼ˆå®‰è£…åŽéªŒè¯ï¼‰
healthCheck:
  command: python3 scripts/get_weather.py --check
  cwd: "${SKILL_DIR}"
```

**å­—æ®µè¯¦è§£ï¼š**

| å­—æ®µ | è¯´æ˜Ž |
|------|------|
| `primaryEnv` | ä¸»è¦è¿è¡ŒçŽ¯å¢ƒï¼š`python`, `node`, `shell`, `rust` ç­‰ |
| `install` | å®‰è£…æ—¶æ‰§è¡Œçš„å‘½ä»¤åˆ—è¡¨ |
| `install[].command` | è¦æ‰§è¡Œçš„å‘½ä»¤ |
| `install[].cwd` | å·¥ä½œç›®å½•ï¼Œ`${SKILL_DIR}` æŒ‡å‘ Skill å®‰è£…ç›®å½• |
| `requires.env` | éœ€è¦çš„çŽ¯å¢ƒå˜é‡åŠè¯´æ˜Ž |
| `requires.system` | éœ€è¦çš„ç³»ç»Ÿçº§å‘½ä»¤ |
| `requires.tools` | éœ€è¦çš„ OpenClaw å·¥å…·æƒé™ |
| `healthCheck` | å®‰è£…åŽçš„å¥åº·æ£€æŸ¥å‘½ä»¤ |

## å®Œæ•´ç¤ºä¾‹ï¼šå¤©æ°”æŸ¥è¯¢ Skill

### 1. åˆ›å»ºé¡¹ç›®ç»“æž„

```bash
mkdir -p weather-skill/scripts
cd weather-skill
```

### 2. ç¼–å†™å¤©æ°”æŸ¥è¯¢è„šæœ¬

```python
#!/usr/bin/env python3
"""
weather-skill/scripts/get_weather.py
å¤©æ°”æŸ¥è¯¢è„šæœ¬ - ä½¿ç”¨ OpenWeatherMap API
"""

import argparse
import json
import os
import sys
import urllib.request
import urllib.parse

API_KEY = os.environ.get("OPENWEATHER_API_KEY")
BASE_URL = "https://api.openweathermap.org/data/2.5"

def get_current_weather(city: str) -> dict:
    """èŽ·å–å½“å‰å¤©æ°”"""
    params = urllib.parse.urlencode({
        "q": city,
        "appid": API_KEY,
        "units": "metric",
        "lang": "zh_cn"
    })
    url = f"{BASE_URL}/weather?{params}"

    with urllib.request.urlopen(url) as response:
        data = json.loads(response.read())

    return {
        "city": data["name"],
        "country": data["sys"]["country"],
        "temperature": data["main"]["temp"],
        "feels_like": data["main"]["feels_like"],
        "humidity": data["main"]["humidity"],
        "description": data["weather"][0]["description"],
        "wind_speed": data["wind"]["speed"],
        "icon": data["weather"][0]["icon"]
    }

def get_forecast(city: str, days: int = 7) -> dict:
    """èŽ·å–å¤©æ°”é¢„æŠ¥"""
    params = urllib.parse.urlencode({
        "q": city,
        "appid": API_KEY,
        "units": "metric",
        "lang": "zh_cn",
        "cnt": min(days * 8, 40)  # API æ¯3å°æ—¶ä¸€ä¸ªæ•°æ®ç‚¹
    })
    url = f"{BASE_URL}/forecast?{params}"

    with urllib.request.urlopen(url) as response:
        data = json.loads(response.read())

    forecasts = []
    seen_dates = set()
    for item in data["list"]:
        date = item["dt_txt"].split(" ")[0]
        if date not in seen_dates:
            seen_dates.add(date)
            forecasts.append({
                "date": date,
                "temp_max": item["main"]["temp_max"],
                "temp_min": item["main"]["temp_min"],
                "description": item["weather"][0]["description"],
                "humidity": item["main"]["humidity"]
            })

    return {
        "city": data["city"]["name"],
        "country": data["city"]["country"],
        "forecasts": forecasts[:days]
    }

def health_check() -> bool:
    """æ£€æŸ¥ API Key æ˜¯å¦æœ‰æ•ˆ"""
    if not API_KEY:
        print("ERROR: OPENWEATHER_API_KEY not set", file=sys.stderr)
        return False
    try:
        get_current_weather("London")
        print("OK: API Key is valid")
        return True
    except Exception as e:
        print(f"ERROR: {e}", file=sys.stderr)
        return False

def main():
    parser = argparse.ArgumentParser(description="å¤©æ°”æŸ¥è¯¢å·¥å…·")
    parser.add_argument("--city", type=str, help="åŸŽå¸‚åç§°")
    parser.add_argument("--type", choices=["current", "forecast"], default="current")
    parser.add_argument("--days", type=int, default=7, help="é¢„æŠ¥å¤©æ•°")
    parser.add_argument("--check", action="store_true", help="å¥åº·æ£€æŸ¥")

    args = parser.parse_args()

    if args.check:
        sys.exit(0 if health_check() else 1)

    if not args.city:
        print("ERROR: --city is required", file=sys.stderr)
        sys.exit(1)

    if not API_KEY:
        print("ERROR: OPENWEATHER_API_KEY environment variable is not set", file=sys.stderr)
        sys.exit(1)

    try:
        if args.type == "current":
            result = get_current_weather(args.city)
        else:
            result = get_forecast(args.city, args.days)

        print(json.dumps(result, ensure_ascii=False, indent=2))
    except Exception as e:
        print(json.dumps({"error": str(e)}, ensure_ascii=False), file=sys.stderr)
        sys.exit(1)

if __name__ == "__main__":
    main()
```

### 3. åˆ›å»ºä¾èµ–æ–‡ä»¶

```text
# weather-skill/scripts/requirements.txt
# æœ¬ç¤ºä¾‹åªä½¿ç”¨æ ‡å‡†åº“ï¼Œæ— é¢å¤–ä¾èµ–
# å¦‚æžœéœ€è¦æ›´ä¸°å¯Œçš„åŠŸèƒ½ï¼Œå¯ä»¥æ·»åŠ ï¼š
# requests>=2.28.0
# python-dateutil>=2.8.0
```

### 4. ç¼–å†™ SKILL.md

```markdown
---
name: weather
displayName: å¤©æ°”æŸ¥è¯¢
version: 1.0.0
description: æŸ¥è¯¢å…¨çƒåŸŽå¸‚å¤©æ°”é¢„æŠ¥
author: your-name
tags:
  - weather
  - utility
requires:
  env:
    - OPENWEATHER_API_KEY
  commands:
    - python3
---

# å¤©æ°”æŸ¥è¯¢ Skill

æŸ¥è¯¢å…¨çƒåŸŽå¸‚çš„å®žæ—¶å¤©æ°”å’Œå¤©æ°”é¢„æŠ¥ã€‚

## ä½¿ç”¨æ–¹å¼

### æŸ¥è¯¢å½“å‰å¤©æ°”
\`\`\`bash
python3 ~/.openclaw/skills/weather/scripts/get_weather.py --city "Shanghai" --type current
\`\`\`

### æŸ¥è¯¢å¤©æ°”é¢„æŠ¥
\`\`\`bash
python3 ~/.openclaw/skills/weather/scripts/get_weather.py --city "Shanghai" --type forecast --days 5
\`\`\`

## è¾“å‡ºç¤ºä¾‹

å½“å‰å¤©æ°”è¿”å›ž JSONï¼š
\`\`\`json
{
  "city": "Shanghai",
  "temperature": 22.5,
  "description": "å¤šäº‘",
  "humidity": 65
}
\`\`\`

è¯·å°† JSON æ•°æ®è½¬åŒ–ä¸ºç”¨æˆ·å‹å¥½çš„æ ¼å¼ï¼Œæ·»åŠ å¤©æ°” emojiã€‚
```

### 5. ç¼–å†™ metadata.openclaw

```yaml
name: weather
version: 1.0.0
primaryEnv: python
install:
  - command: pip3 install -r scripts/requirements.txt
    cwd: "${SKILL_DIR}"
requires:
  env:
    - name: OPENWEATHER_API_KEY
      description: "OpenWeatherMap API Key (https://openweathermap.org/api)"
      required: true
  system:
    - python3
healthCheck:
  command: python3 scripts/get_weather.py --check
  cwd: "${SKILL_DIR}"
```

## æµ‹è¯•å’Œè°ƒè¯•

### æœ¬åœ°æµ‹è¯•

```bash
# è®¾ç½®çŽ¯å¢ƒå˜é‡
export OPENWEATHER_API_KEY="your-api-key-here"

# æµ‹è¯•å½“å‰å¤©æ°”
python3 scripts/get_weather.py --city "Shanghai" --type current

# æµ‹è¯•é¢„æŠ¥
python3 scripts/get_weather.py --city "Beijing" --type forecast --days 3

# è¿è¡Œå¥åº·æ£€æŸ¥
python3 scripts/get_weather.py --check
```

### å®‰è£…åˆ°æœ¬åœ° Agent æµ‹è¯•

```bash
# æ‰‹åŠ¨å®‰è£…ï¼ˆå¤åˆ¶åˆ° skills ç›®å½•ï¼‰
cp -r weather-skill ~/.openclaw/skills/weather

# æˆ–ä½¿ç”¨ openclaw CLI å®‰è£…æœ¬åœ° Skill
openclaw skill install ./weather-skill

# éªŒè¯å®‰è£…
openclaw skill list
```

å®‰è£…åŽï¼Œé‡å¯ Agent æˆ–å¼€å¯æ–°ä¼šè¯ï¼ŒAgent å°±èƒ½ä½¿ç”¨å¤©æ°”æŸ¥è¯¢åŠŸèƒ½äº†ã€‚

### è°ƒè¯•æŠ€å·§

1. **æŸ¥çœ‹ Agent æ˜¯å¦è¯†åˆ« Skill**ï¼šåœ¨å¯¹è¯ä¸­é—®ã€Œä½ æœ‰å“ªäº› Skillï¼Ÿã€
2. **æ£€æŸ¥è„šæœ¬è¾“å‡º**ï¼šæ‰‹åŠ¨è¿è¡Œè„šæœ¬ç¡®è®¤è¾“å‡ºæ ¼å¼æ­£ç¡®
3. **æŸ¥çœ‹é”™è¯¯æ—¥å¿—**ï¼š`docker compose logs -f | grep "weather"`
4. **çŽ¯å¢ƒå˜é‡æ£€æŸ¥**ï¼šç¡®ä¿ `.env` ä¸­è®¾ç½®äº†å¿…éœ€çš„ API Key

## å‘å¸ƒåˆ° ClawdHub

[ClawdHub](https://hub.openclaw.com) æ˜¯ OpenClaw çš„ Skill å•†åº—ã€‚å¼€å‘å®ŒæˆåŽï¼Œä½ å¯ä»¥å°† Skill å‘å¸ƒä¾›æ‰€æœ‰äººä½¿ç”¨ã€‚

### å‘å¸ƒæ­¥éª¤

```bash
# 1. ç™»å½• ClawdHub
openclaw auth login

# 2. éªŒè¯ Skill æ ¼å¼
openclaw skill validate ./weather-skill

# è¾“å‡ºï¼š
# âœ… SKILL.md: valid
# âœ… metadata.openclaw: valid
# âœ… Health check: passed
# âœ… Ready to publish

# 3. å‘å¸ƒ
openclaw skill publish ./weather-skill

# è¾“å‡ºï¼š
# ðŸ“¦ Publishing weather@1.0.0...
# âœ… Published successfully!
# ðŸ”— https://hub.openclaw.com/skills/weather
```

### ç‰ˆæœ¬æ›´æ–°

```bash
# ä¿®æ”¹ SKILL.md å’Œ metadata.openclaw ä¸­çš„ version
# ç„¶åŽé‡æ–°å‘å¸ƒ
openclaw skill publish ./weather-skill

# ä¹Ÿæ”¯æŒæŒ‡å®šç‰ˆæœ¬
openclaw skill publish ./weather-skill --version 1.1.0
```

### å‘å¸ƒæ³¨æ„äº‹é¡¹

- **å‘½åå”¯ä¸€æ€§**ï¼šSkill åç§°åœ¨ ClawdHub ä¸Šæ˜¯å…¨å±€å”¯ä¸€çš„
- **API Key å®‰å…¨**ï¼šä¸è¦åœ¨ Skill ä¸­ç¡¬ç¼–ç  API Keyï¼Œä½¿ç”¨çŽ¯å¢ƒå˜é‡
- **README å®Œå–„**ï¼šå¥½çš„æ–‡æ¡£èƒ½è®©æ›´å¤šäººä½¿ç”¨ä½ çš„ Skill
- **æµ‹è¯•è¦†ç›–**ï¼šå‘å¸ƒå‰ç¡®ä¿åœ¨å¹²å‡€çŽ¯å¢ƒä¸­æµ‹è¯•å®‰è£…å’Œä½¿ç”¨æµç¨‹
- **è®¸å¯åè®®**ï¼šå»ºè®®ä½¿ç”¨ MIT æˆ– Apache 2.0 å¼€æºè®¸å¯

## Skill å¼€å‘æœ€ä½³å®žè·µ

1. **å•ä¸€èŒè´£**ï¼šä¸€ä¸ª Skill ä¸“æ³¨ä¸€ä¸ªé¢†åŸŸï¼ˆå¤©æ°”ã€é‚®ä»¶ã€æ—¥åŽ†ç­‰ï¼‰
2. **ä¼˜é›…é™çº§**ï¼šAPI Key ç¼ºå¤±æ—¶ç»™å‡ºæ¸…æ™°çš„é”™è¯¯æç¤º
3. **è¾“å‡ºæ ¼å¼ç»Ÿä¸€**ï¼šä½¿ç”¨ JSON è¾“å‡ºï¼Œä¾¿äºŽ Agent è§£æž
4. **æ–‡æ¡£å®Œå–„**ï¼šSKILL.md ä¸­çš„è¯´æ˜Žè¶Šæ¸…æ™°ï¼ŒAgent ä½¿ç”¨è¶Šå‡†ç¡®
5. **ç‰ˆæœ¬ç®¡ç†**ï¼šä½¿ç”¨ git ç®¡ç† Skill ä»£ç ï¼Œè¯­ä¹‰åŒ–ç‰ˆæœ¬å·
6. **æœ€å°ä¾èµ–**ï¼šå°½é‡ä½¿ç”¨æ ‡å‡†åº“ï¼Œå‡å°‘å®‰è£…æ­¥éª¤

---

> ðŸ’¬ **æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Ÿ** æ¬¢è¿Žåœ¨ä¸‹æ–¹è¯„è®ºåŒºç•™è¨€è®¨è®ºã€‚
